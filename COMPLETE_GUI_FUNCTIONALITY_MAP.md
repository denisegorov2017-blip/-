# Полная карта функциональности всех интерфейсов системы

## Обзор

Система предоставляет три различных интерфейса для работы с расчетом коэффициентов нелинейной усушки, каждый из которых имеет свои особенности и расширения функциональности:

1. **Flet GUI** (`src/gui_complete.py`) - Современный графический интерфейс
2. **Tkinter GUI** (`src/tkinter_gui.py`) - Расширенный десктопный интерфейс с дополнительными возможностями
3. **Streamlit Dashboard** (`src/dashboard.py`) - Веб-дашборд для анализа результатов

Все интерфейсы используют общее ядро системы для обработки данных и расчетов.

## 1. Flet GUI - Базовый графический интерфейс

### Основной рабочий процесс:
1. Выбор Excel файла через диалоговое окно
2. Конвертация Excel в JSON с сохранением иерархии
3. Парсинг JSON данных в DataFrame
4. Расчет коэффициентов усушки
5. Генерация HTML отчетов
6. Открытие отчетов в браузере

### Параметры расчета:
- [x] Использование адаптивной модели расчета
- [x] Учет процента излишка при поступлении (с настройкой процента)

### Интерфейсные элементы:
- [x] Современный дизайн с использованием Flet
- [x] Индикатор прогресса выполнения операций
- [x] Всплывающие уведомления о статусе операций
- [x] Автоматическое обновление статуса выполнения
- [x] Кнопки открытия отчетов и папки результатов
- [x] Автоматическая проверка наличия инвентаризаций
- [x] Помощь и руководство пользователя
- [x] **ИИ-чат для помощи в работе с системой**

## 2. Tkinter GUI - Расширенный десктопный интерфейс

### Основной рабочий процесс:
1. Выбор Excel файла через диалоговое окно
2. Выбор режима обработки:
   - Стандартная обработка (общий формат Excel)
   - Специализированная обработка партий рыбы
3. Конвертация Excel в JSON с сохранением иерархии
4. Парсинг JSON данных в DataFrame
5. Расчет коэффициентов усушки
6. Генерация HTML отчетов
7. Открытие отчетов в браузере

### Параметры расчета:
- [x] Использование адаптивной модели расчета
- [x] Учет процента излишка при поступлении (с настройкой процента)

### Расширенные возможности:
- [x] Два режима обработки (стандартный и специализированный для рыбы)
- [x] Многостраничный интерфейс с вкладками:
  - Основное (расчет)
  - Утилиты (управление данными)
  - **ИИ-чат (взаимодействие с ИИ-ассистентом)**
  - Помощь (руководство пользователя)
- [x] Прогресс-бар выполнения операций
- [x] Журнал выполнения операций с прокруткой
- [x] Многопоточное выполнение расчетов (не блокирует UI)
- [x] Современный дизайн с использованием ttk стилей
- [x] Поддержка горячих клавиш и стандартных элементов управления
- [x] Автоматическая проверка наличия инвентаризаций

### Утилиты:
- [x] Организация тестовых данных
- [x] Открытие папки с результатами

### Отчеты:
- [x] Основной отчет по коэффициентам усушки
- [x] Отчет об ошибках расчета

## 3. Streamlit Dashboard - Аналитический веб-дашборд

### Основной рабочий процесс:
1. Выбор отчета для анализа из доступных HTML отчетов
2. Фильтрация данных по различным критериям
3. Просмотр сводной статистики
4. Анализ данных в табличном виде
5. Визуализация данных
6. Анализ топ-позиций

### Функции анализа:
- [x] Выбор отчета для анализа
- [x] Открытие отчетов в браузере
- [x] Открытие папки с отчетами

### Фильтрация данных:
- [x] По точности расчетов (слайдер)
- [x] По названию номенклатуры (текстовый поиск)
- [x] По диапазону коэффициентов A и B (слайдеры)

### Аналитические возможности:
- [x] Сводная статистика:
  - Всего позиций
  - Средний коэффициент A
  - Средний коэффициент B
  - Средняя точность
- [x] Таблица результатов с возможностью сортировки
- [x] Визуализация:
  - Распределение точности (гистограмма)
  - Распределение по категориям точности (круговая диаграмма)
  - Корреляция между коэффициентами A и B (диаграмма рассеяния)
  - Распределение коэффициентов A и B (гистограммы)
- [x] Анализ топ-позиций:
  - Топ-10 по точности
  - Топ-10 по коэффициенту A

### Интерфейсные особенности:
- [x] Современный дизайн с кастомными CSS стилями
- [x] Адаптивная верстка для разных устройств
- [x] Интерактивные графики с помощью Plotly
- [x] Анимации и визуальные эффекты
- [x] Информационные панели и подсказки
- [x] Расширенные фильтры в боковой панели

## Общая функциональность ядра системы

### Математическая модель:
- [x] Используется формула нелинейной усушки: S(t) = a*(1 - exp(-b*t)) + c*t
- [x] Анализ недостач из данных инвентаризации
- [x] Учет процента излишка при поступлении
- [x] Автоматическая проверка наличия начальной и конечной инвентаризаций

### Основные компоненты:
- [x] `ShrinkageSystem` - Оркестратор системы
- [x] `ExcelHierarchyPreserver` - Сохранение иерархии Excel
- [x] `ImprovedJsonParser` - Парсер JSON данных
- [x] `DataProcessor` - Процессор данных
- [x] `ShrinkageCalculator` - Базовый калькулятор усушки
- [x] `AdaptiveShrinkageModel` - Адаптивная модель расчета
- [x] `ReportGenerator` - Генератор отчетов
- [x] `AIChat` - ИИ-чат для помощи пользователям

## Сравнительная таблица функциональности

| Функция | Flet GUI | Tkinter GUI | Streamlit Dashboard |
|---------|----------|-------------|---------------------|
| Выбор Excel файла | ✅ | ✅ | ❌ |
| Конвертация Excel в JSON | ✅ | ✅ | ❌ |
| Парсинг данных | ✅ | ✅ | ❌ |
| Расчет коэффициентов | ✅ | ✅ | ❌ |
| Использование адаптивной модели | ✅ | ✅ | ❌ |
| Учет процента излишка | ✅ | ✅ | ❌ |
| Режим обработки рыбы | ❌ | ✅ | ❌ |
| Генерация отчетов | ✅ | ✅ | ❌ |
| Открытие отчетов | ✅ | ✅ | ✅ |
| Отчет об ошибках | ❌ | ✅ | ❌ |
| Журнал операций | ❌ | ✅ | ❌ |
| Многопоточность | ❌ | ✅ | ❌ |
| Утилиты управления данными | ❌ | ✅ | ❌ |
| Выбор отчета для анализа | ❌ | ❌ | ✅ |
| Фильтрация данных | ❌ | ❌ | ✅ |
| Сводная статистика | ❌ | ❌ | ✅ |
| Табличный анализ | ❌ | ❌ | ✅ |
| Визуализация данных | ❌ | ❌ | ✅ |
| Анализ топ-позиций | ❌ | ❌ | ✅ |
| Проверка инвентаризаций | ✅ | ✅ | ❌ |
| Помощь и руководство | ✅ | ✅ | ❌ |
| **ИИ-чат** | ✅ | ✅ | ❌ |

## Заключение

Каждый интерфейс системы имеет свою специализацию:
- **Flet GUI** - Базовый пользовательский интерфейс для выполнения расчетов с современным дизайном
- **Tkinter GUI** - Расширенный интерфейс с дополнительными возможностями и утилитами
- **Streamlit Dashboard** - Аналитический интерфейс для анализа результатов

Все интерфейсы интегрированы с общим ядром системы, обеспечивая согласованность в расчетах и обработке данных.