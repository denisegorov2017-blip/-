# Реализованные функции системы

## Автоматическая очистка тестовых данных и организация в подпапки

### Компоненты системы

1. **TestDataManager** - основной класс для управления тестовыми данными
   - Создание поддиректорий для тестовых и реальных данных
   - Организация существующих файлов по категориям
   - Автоматическая очистка старых тестовых данных
   - Удаление пустых директорий для поддержания чистоты структуры
   - Сбор статистики по тестовым и реальным данным

2. **organize_test_data.py** - скрипт для автоматической организации данных
   - Командная утилита для запуска организации данных
   - Поддержка настройки времени хранения тестовых данных

3. **Интеграция в ReportGenerator** - автоматическое определение категории данных
   - Распознавание тестовых данных по именам файлов
   - Сохранение результатов в соответствующие поддиректории

### Классификация файлов

#### Тестовые данные
Файлы, содержащие следующие ключевые слова:
- `test` (в любом регистре)
- `тест`
- `fish_batch_test_results`
- `оптимизация`

#### Реальные данные
Файлы, содержащие следующие ключевые слова:
- `b3ded820-4385-4a42-abc7-75dc0756d335` (уникальный идентификатор реальных данных)
- `вся номенклатура`

#### Неопределенные данные
Файлы, которые не соответствуют вышеуказанным паттернам, классифицируются по времени создания:
- Созданы менее 24 часов назад - тестовые данные
- Созданы более 24 часов назад - реальные данные

### Структура директорий

После применения системы все данные организуются следующим образом:

```
результаты/
├── тестовые_данные/          # Все тестовые данные
├── реальные_данные/          # Все реальные данные
```

Пустые директории автоматически удаляются для поддержания чистоты структуры.

### Использование

#### Автоматическая организация
```bash
python scripts/organize_test_data.py
```

#### Программное использование
```python
from src.core.test_data_manager import TestDataManager

# Создаем менеджер
manager = TestDataManager("результаты")

# Организуем существующие файлы
manager.organize_existing_files()

# Очищаем старые тестовые данные (по умолчанию старше 7 дней)
manager.cleanup_old_test_data()

# Удаляем пустые директории
manager._remove_empty_directories()

# Получаем статистику
stats = manager.get_test_data_stats()
```

### Преимущества

1. **Улучшенная организация** - все данные структурированы по типам
2. **Экономия места** - автоматическая очистка старых тестовых данных
3. **Чистота структуры** - автоматическое удаление пустых директорий
4. **Простота навигации** - легче находить нужные файлы
5. **Автоматизация** - минимальное вмешательство пользователя требуется
6. **Статистика** - возможность отслеживания объема данных

### Тестирование

Созданы unit-тесты для проверки корректности работы системы:
- Проверка создания поддиректорий
- Проверка классификации файлов
- Проверка перемещения файлов в правильные директории
- Проверка сбора статистики
- Проверка очистки старых данных
- Проверка удаления пустых директорий

## Документация

Создана подробная документация:
- [test_data_organization.md](test_data_organization.md) - документация на английском языке
- [организация_тестовых_данных.md](организация_тестовых_данных.md) - документация на русском языке
- Обновлен [project_status_and_description.md](../project_status_and_description.md) - дорожная карта проекта