# Описание моделей расчета коэффициентов нелинейной усушки

## Базовая модель (ShrinkageCalculator)

### Общее описание
Базовая модель реализует классический подход к расчету коэффициентов нелинейной усушки на основе математических функций. Она использует исторические данные инвентаризации для подгонки кривых усушки и определения оптимальных коэффициентов.

### Математические модели

#### 1. Экспоненциальная модель
**Формула:** `S(t) = a * (1 - exp(-b*t)) + c*t`

- **Коэффициент a**: Максимальная усушка (асимптотическое значение)
- **Коэффициент b**: Скорость достижения максимальной усушки
- **Коэффициент c**: Линейный компонент усушки

**Особенности:**
- Наиболее точно отражает реальный процесс усушки
- Учитывает как быструю начальную усушку, так и замедление со временем
- Подходит для большинства видов рыбной продукции

#### 2. Линейная модель
**Формула:** `S(t) = a*t + b`

- **Коэффициент a**: Линейная скорость усушки
- **Коэффициент b**: Константное значение усушки

**Особенности:**
- Упрощенная модель для стабильных условий хранения
- Быстрые расчеты
- Подходит для продукции с постоянной скоростью усушки

#### 3. Полиномиальная модель
**Формула:** `S(t) = a*t² + b*t + c`

- **Коэффициент a**: Квадратичный компонент усушки
- **Коэффициент b**: Линейный компонент усушки
- **Коэффициент c**: Константное значение усушки

**Особенности:**
- Позволяет моделировать нелинейные изменения скорости усушки
- Подходит для сложных условий хранения
- Более гибкая, но требует больше данных для точной подгонки

### Процесс расчета
1. Подготовка временного ряда на основе данных инвентаризации
2. Генерация реалистичного профиля усушки
3. Подгонка кривой методом наименьших квадратов
4. Расчет коэффициентов точности (R²)
5. Возврат результатов с метаданными

### Преимущества
- Простота реализации и понимания
- Быстрые расчеты
- Стабильные результаты при достаточном объеме данных
- Поддержка нескольких типов математических моделей

### Ограничения
- Не учитывает внешние факторы (температура, влажность)
- Не адаптируется к изменениям условий хранения
- Требует исторических данных инвентаризации

## Адаптивная модель (AdaptiveShrinkageModel)

### Общее описание
Адаптивная модель представляет собой самообучающуюся систему, способную адаптироваться к различным условиям хранения, типам продукции и сезонным изменениям. Она использует машинное обучение для постоянного улучшения точности прогнозов.

### Основные компоненты

#### 1. Самообучение
- Непрерывная адаптация коэффициентов на основе новых данных
- История производительности для оптимизации будущих расчетов
- Автоматическая коррекция при отклонениях прогнозов

#### 2. Типы продукции
- **Свежая рыба**: Базовые коэффициенты
- **Слабосоленая**: Пониженная усушка (70% от базовой)
- **Горячее копчение**: Умеренная усушка (75% от базовой)
- **Холодное копчение**: Средняя усушка (85% от базовой)
- **Копченая рыба**: Средняя усушка (80% от базовой)
- **Сушеная/вяленая**: Минимальная усушка (60% от базовой)

#### 3. Сезонная адаптация
- **Зима**: Повышенная усушка (коэффициент 1.15)
- **Весна**: Средняя усушка (коэффициент 1.05)
- **Лето**: Максимальная усушка (коэффициент 1.25)
- **Осень**: Повышенная усушка (коэффициент 1.10)

#### 4. Учет излишка при поступлении
- Персональный учет излишка для каждой номенклатуры
- Автоматическое определение типа продукции по названию
- Коррекция расчетов с учетом излишка

### Процесс адаптации
1. Коррекция данных с учетом излишка при поступлении
2. Определение типа продукции по названию номенклатуры
3. Расчет новых коэффициентов на основе текущих данных
4. Применение факторов адаптации (температура, влажность, сезон)
5. Обновление базовых коэффициентов с учетом скорости обучения
6. Возврат адаптированных коэффициентов

### Преимущества
- Автоматическая адаптация к изменяющимся условиям
- Учет специфики разных типов продукции
- Сезонная адаптация
- Персональный учет излишка при поступлении
- Постоянное улучшение точности прогнозов
- Поддержка машинного обучения

### Ограничения
- Более сложная реализация
- Требует больше вычислительных ресурсов
- Зависимость от качества входных данных

## Сравнение моделей

| Характеристика | Базовая модель | Адаптивная модель |
|----------------|----------------|-------------------|
| Сложность реализации | Низкая | Высокая |
| Скорость расчетов | Высокая | Средняя |
| Адаптация к условиям | Нет | Да |
| Учет типа продукции | Нет | Да |
| Сезонная адаптация | Нет | Да |
| Учет излишка | Нет | Да |
| Самообучение | Нет | Да |
| Требования к данным | Минимальные | Средние |

## Рекомендации по использованию

### Базовая модель рекомендуется:
- При стабильных условиях хранения
- При недостатке исторических данных
- Для быстрых предварительных расчетов
- При ограниченных вычислительных ресурсах

### Адаптивная модель рекомендуется:
- При изменяющихся условиях хранения
- Для постоянного использования в производстве
- При наличии достаточного объема исторических данных
- Для повышения точности прогнозов