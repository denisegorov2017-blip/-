# Обновление выбора моделей OpenRouter: акцент на бесплатные и платные модели

## Обзор изменений

В рамках данного обновления была реализована функциональность, которая четко разделяет модели OpenRouter на бесплатные и платные, а также предоставляет актуальную информацию о доступности и ценах моделей. Это обновление направлено на улучшение пользовательского опыта при выборе моделей ИИ.

## Реализованные изменения

### 1. Новый модуль для работы с моделями OpenRouter

Создан новый модуль `src/core/openrouter_models.py`, который предоставляет следующие функции:

- **get_openrouter_models()** - Получает актуальный список моделей OpenRouter с их информацией
- **categorize_models()** - Разделяет модели на бесплатные и платные на основе цен
- **get_model_pricing_info()** - Получает информацию о ценах для конкретной модели
- **format_pricing_info()** - Форматирует информацию о ценах для отображения
- **get_recommended_free_models()** - Возвращает список рекомендуемых бесплатных моделей
- **get_recommended_paid_models()** - Возвращает список рекомендуемых платных моделей
- **get_model_tooltip_text()** - Генерирует текст всплывающей подсказки для модели

### 2. Обновление класса AIChat

В класс `AIChat` добавлен новый метод:
- **get_openrouter_model_tooltip()** - Получает текст всплывающей подсказки для модели OpenRouter

### 3. Обновление графических интерфейсов

#### Tkinter GUI
В настройках OpenRouter в диалоге ИИ-чата обновлены всплывающие подсказки для выбора моделей. Теперь они четко разделяют модели на:
- Бесплатные модели (с пометкой "БЕСПЛАТНЫЕ МОДЕЛИ")
- Платные модели (с пометкой "ПЛАТНЫЕ МОДЕЛИ")

#### Flet GUI
Аналогично Tkinter GUI, в настройках OpenRouter обновлены всплывающие подсказки с четким разделением на бесплатные и платные модели.

### 4. Обновление документации

#### Руководство по интеграции OpenRouter
Обновлено с четким разделением моделей на бесплатные и платные, а также с рекомендациями по их использованию.

#### Руководство по выбору моделей ИИ
Добавлены разделы по стоимости использования и рекомендации по выбору бесплатных vs платных моделей.

#### Документация функции ИИ-чата
Обновлена с информацией о бесплатных и платных моделях OpenRouter, а также с описанием получения актуальной информации.

## Преимущества реализации

1. **Четкое разделение моделей** - Пользователи могут легко отличить бесплатные модели от платных
2. **Актуальная информация** - Система автоматически получает текущие цены и доступность моделей
3. **Улучшенный пользовательский опыт** - Всплывающие подсказки содержат подробную информацию о каждой модели
4. **Экономия средств** - Пользователи могут выбирать бесплатные модели для повседневных задач
5. **Гибкость выбора** - Возможность использовать платные модели для сложных задач, где требуется максимальное качество

## Рекомендации по использованию

1. **Для повседневных задач** - Используйте бесплатные модели OpenRouter, такие как:
   - `mistralai/mistral-7b-instruct`
   - `nousresearch/nous-capybara-7b`
   - `openchat/openchat-7b`

2. **Для сложных аналитических задач** - Используйте платные модели с высоким качеством:
   - `openai/gpt-4o`
   - `anthropic/claude-3-5-sonnet`
   - `google/gemini-pro`

3. **Для экономии средств** - Начните с бесплатных моделей и переходите к платным только при необходимости

## Технические детали

### Кэширование данных
Для оптимизации производительности реализовано кэширование данных о моделях с таймаутом 1 час.

### Обработка ошибок
Реализована надежная обработка ошибок сети и других исключений с возможностью использования кэшированных данных.

### Тестирование
Созданы модульные тесты для проверки корректности работы всех компонентов.

## Заключение

Реализация четкого разделения бесплатных и платных моделей OpenRouter значительно улучшает пользовательский опыт и помогает пользователям принимать обоснованные решения при выборе моделей ИИ. Актуальная информация о ценах и доступности моделей позволяет оптимизировать расходы и выбирать наиболее подходящие модели для конкретных задач.