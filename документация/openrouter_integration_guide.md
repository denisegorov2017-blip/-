# Руководство по интеграции OpenRouter в систему расчета усушки

## Обзор

Это руководство содержит информацию о том, как интегрировать OpenRouter в систему расчета коэффициентов усушки для доступа к более чем 400 различным ИИ моделям через единый API.

## Что такое OpenRouter

OpenRouter - это платформа, предоставляющая доступ к множеству ИИ моделей через единый API, совместимый с OpenAI. Платформа предлагает:

- Доступ к более чем 400 различным моделям
- Единый API для работы с различными поставщиками
- Конкуренцию цен между поставщиками
- Автоматическое распределение нагрузки
- Отказоустойчивость
- Рейтинги моделей на основе отзывов пользователей

## Регистрация и настройка OpenRouter

### 1. Регистрация аккаунта
1. Перейдите на сайт https://openrouter.ai
2. Нажмите кнопку "Sign Up" или "Register"
3. Зарегистрируйтесь с помощью email или через Google/GitHub аккаунт
4. Подтвердите email адрес

### 2. Получение API ключа
1. После входа в аккаунт перейдите в раздел "API Keys"
2. Нажмите "Create API Key"
3. Введите название ключа (например, "Shrinkage System")
4. Скопируйте сгенерированный API ключ и сохраните его в безопасном месте

### 3. Пополнение баланса (при необходимости)
1. Перейдите в раздел "Billing"
2. Выберите способ оплаты
3. Пополните баланс необходимой суммой
4. Некоторые модели доступны бесплатно, другие требуют оплаты за использование

## Поддерживаемые модели

OpenRouter предоставляет доступ к моделям от различных поставщиков:

### 1. OpenAI
- GPT-3.5-turbo
- GPT-4
- GPT-4 Turbo
- GPT-4o

### 2. Anthropic
- Claude 1
- Claude 2
- Claude Instant
- Claude 3 (Haiku, Sonnet, Opus)

### 3. Google
- PaLM 2
- Gemini Pro
- Gemini Flash

### 4. Meta
- Llama 2 (7B, 13B, 70B)
- Llama 3 (8B, 70B)
- Code Llama

### 5. Mistral AI
- Mistral 7B
- Mixtral 8x7B
- Mistral Large

### 6. Alibaba
- Qwen (различные версии)

### 7. DeepSeek
- DeepSeek (различные версии)

### 8. Другие поставщики
- Nous Research
- WizardLM
- Neural Chat
- И многие другие

## Настройка в системе расчета усушки

### 1. Открытие настроек ИИ-чата
1. Запустите систему расчета усушки
2. Перейдите в меню "Настройки" -> "Настройки ИИ-чата"

### 2. Включение OpenRouter
1. Установите флажок "Включить OpenRouter"
2. В поле "API ключ OpenRouter" введите ваш API ключ
3. В поле "Модель OpenRouter" выберите или введите название модели (например, "openai/gpt-3.5-turbo")

### 3. Сохранение настроек
1. Нажмите кнопку "Сохранить"
2. Перезапустите систему при необходимости

## Рекомендуемые модели для системы

### 1. Для общих задач
- **openai/gpt-3.5-turbo** - Хорошее соотношение цены и качества
- **anthropic/claude-3-haiku** - Быстрая и эффективная модель
- **google/gemini-flash** - Быстрая модель от Google

### 2. Для сложных задач
- **openai/gpt-4o** - Наиболее мощная модель от OpenAI
- **anthropic/claude-3-sonnet** - Отличное качество для сложных задач
- **google/gemini-pro** - Мощная модель от Google

### 3. Бесплатные модели
- **mistralai/mistral-7b-instruct** - Бесплатная модель с хорошим качеством
- **nousresearch/nous-capybara-7b** - Бесплатная модель
- **openchat/openchat-7b** - Бесплатная модель

### 4. Русскоязычные модели
- **alibaba/qwen-72b-chat** - Хорошая поддержка русского языка
- **google/gemma-7b-it** - Поддержка русского языка
- **mistralai/mixtral-8x7b-instruct** - Хорошая поддержка русского языка

## Проверка работы

### 1. Тестирование подключения
1. Перейдите во вкладку "ИИ-чат"
2. Введите тестовый вопрос, например: "Как работает система расчета коэффициентов усушки?"
3. Нажмите "Отправить"
4. Дождитесь ответа от OpenRouter

### 2. Проверка логов
1. Проверьте логи системы на наличие ошибок подключения
2. Убедитесь, что запросы успешно отправляются и получаются

## Управление расходами

### 1. Мониторинг использования
1. Регулярно проверяйте раздел "Usage" в личном кабинете OpenRouter
2. Следите за расходами на различные модели
3. Устанавливайте лимиты на использование при необходимости

### 2. Оптимизация затрат
1. Используйте более дешевые модели для простых задач
2. Ограничьте максимальное количество токенов в ответах
3. Кэшируйте часто повторяющиеся запросы

### 3. Сравнение цен
1. Используйте раздел "Models" на сайте OpenRouter для сравнения цен
2. Выбирайте модели с оптимальным соотношением цена/качество
3. Тестируйте разные модели для разных типов задач

## Устранение неполадок

### 1. Ошибки аутентификации
**Симптомы**: Ошибки "Invalid API key" или "Authentication failed"
**Решения**:
- Проверьте правильность ввода API ключа
- Убедитесь, что ключ не истек
- Создайте новый API ключ при необходимости

### 2. Превышение лимитов
**Симптомы**: Ошибки "Rate limit exceeded" или "Quota exceeded"
**Решения**:
- Дождитесь сброса лимитов
- Пополните баланс
- Используйте другие модели с более высокими лимитами

### 3. Ошибки моделей
**Симптомы**: Ошибки "Model not found" или "Model unavailable"
**Решения**:
- Проверьте правильность названия модели
- Выберите другую модель
- Проверьте доступность модели в личном кабинете

### 4. Проблемы с подключением
**Симптомы**: Ошибки сети или таймауты
**Решения**:
- Проверьте подключение к интернету
- Попробуйте позже (возможны технические работы)
- Используйте встроенный ИИ при временных проблемах

## Полезные ресурсы

### 1. Документация OpenRouter
- Официальная документация: https://openrouter.ai/docs
- API документация: https://openrouter.ai/api/v1
- Примеры использования: https://openrouter.ai/playground

### 2. Сравнение моделей
- Сравнение цен: https://openrouter.ai/models
- Рейтинги моделей: https://openrouter.ai/leaderboard
- Технические характеристики: https://openrouter.ai/specs

### 3. Сообщество
- Discord: https://discord.gg/openrouter
- Reddit: https://reddit.com/r/OpenRouter
- GitHub: https://github.com/OpenRouterTeam

## Заключение

OpenRouter предоставляет удобный способ доступа к множеству ИИ моделей через единый API. Интеграция с системой расчета коэффициентов усушки позволяет использовать мощные модели без необходимости регистрации в каждом сервисе отдельно. Правильный выбор моделей и управление расходами позволит эффективно использовать возможности OpenRouter.