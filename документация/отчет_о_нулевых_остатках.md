# Отчет о номенклатурах с нулевыми начальными остатками

## Обзор

В систему добавлена новая функция автоматической генерации отчета о номенклатурах с нулевыми начальными остатками. Этот отчет выводится в логи при проверке инвентаризаций и позволяет пользователям проверить корректность установленных нулевых остатков перед началом расчетов.

## Как это работает

При вызове метода [_check_inventory_availability](file:///c%3A/Users/D_909/Desktop/%D0%B4%D0%BB%D1%8F%20%D0%BD%D0%BE%D0%B2%D0%BE%D0%B3%D0%BE%20%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D0%B0/src/core/shrinkage_system.py#L116-L218) система автоматически генерирует отчет, содержащий информацию о всех номенклатурах с нулевыми начальными остатками, включая:

1. Номенклатуры, у которых начальный остаток был отсутствующим (None, NaN, пустая строка и т.д.) и автоматически установлен в 0.0
2. Номенклатуры, у которых начальный остаток уже был равен 0.0

## Обработка различных типов отсутствующих значений

Система корректно обрабатывает различные типы отсутствующих или недопустимых значений:

- **NaN (Not a Number)**: Значения NaN автоматически преобразуются в 0.0 и включаются в отчет
- **None**: Значения None автоматически преобразуются в 0.0 и включаются в отчет
- **Пустые строки ('')**: Пустые строки автоматически преобразуются в 0.0 и включаются в отчет
- **Недопустимые числовые значения**: Недопустимые значения автоматически преобразуются в 0.0 и включаются в отчет

## Формат отчета

Отчет выводится в логи в следующем формате:

```
INFO | Отчет о номенклатурах с нулевыми начальными остатками для проверки пользователем:
INFO | Номенклатура | Нач. остаток | Приход | Расход | Кон. остаток
INFO | -----------------------------------------------------------------
INFO | {название} | {остаток} | {приход} | {расход} | {кон. остаток}
```

## Пример отчета

```
INFO | Отчет о номенклатурах с нулевыми начальными остатками для проверки пользователем:
INFO | Номенклатура | Нач. остаток | Приход | Расход | Кон. остаток
INFO | -----------------------------------------------------------------
INFO | Тестовый продукт 1 | 0.0 | 2.0 | 1.5 | 0.5
INFO | Тестовый продукт 2 | 0.0 | 3.0 | 2.0 | 1.0
INFO | Тестовый продукт 3 | 0.0 | 1.0 | 0.5 | Отсутствует
```

## Важность отчета

Этот отчет является важным инструментом для проверки корректности данных перед началом расчетов коэффициентов усушки. Он позволяет пользователям:

1. **Проверить автоматически установленные нулевые остатки** - убедиться, что система правильно обработала отсутствующие данные
2. **Выявить потенциально проблемные позиции** - номенклатуры с нулевыми остатками могут требовать дополнительной проверки
3. **Подтвердить бизнес-логику** - нулевой начальный остаток может быть корректным в случае отсутствия товара на начало периода

## Рекомендации по использованию

1. **Всегда проверяйте отчет** - перед началом расчетов коэффициентов усушки обращайте внимание на автоматически сгенерированный отчет
2. **Сверяйте данные** - при необходимости сверяйте номенклатуры с нулевыми остатками с исходными данными
3. **Обращайте внимание на отсутствующие конечные остатки** - в отчете также указывается информация о конечных остатках, что помогает выявить неполные данные

## Техническая реализация

Функция реализована в методе [_check_inventory_availability](file:///c%3A/Users/D_909/Desktop/%D0%B4%D0%BB%D1%8F%20%D0%BD%D0%BE%D0%B2%D0%BE%D0%B3%D0%BE%20%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D0%B0/src/core/shrinkage_system.py#L116-L218) класса `ShrinkageSystem` и автоматически вызывается при обработке данных.

## Заключение

Функция автоматической генерации отчета о номенклатурах с нулевыми начальными остатками повышает прозрачность работы системы и помогает пользователям проверять корректность обработанных данных перед началом расчетов. Система корректно обрабатывает все типы отсутствующих значений, обеспечивая стабильную работу даже при наличии некорректных данных в исходных файлах.